!function(a){a.fn.quicksand=function(b,c){var e={duration:750,easing:"swing",attribute:"data-id",adjustHeight:"auto",useScaling:!0,enhancement:function(){},selector:"> *",dx:0,dy:0};a.extend(e,c),(a.browser.msie||"undefined"==typeof a.fn.scale)&&(e.useScaling=!1);var f;if("function"==typeof arguments[1])var f=arguments[1];else var f=arguments[2];return this.each(function(c){var g,l,h=[],i=a(b).clone(),j=a(this),k=a(this).css("height"),m=!1,n=a(j).offset(),o=[],p=a(this).find(e.selector);if(a.browser.msie&&a.browser.version.substr(0,1)<7)return void j.html("").append(i);var q=0,r=function(){q||(j.html(w.html()),"function"==typeof f&&f.call(this),m&&j.css("height",l),e.enhancement(j),q=1)},s=j.offsetParent(),t=s.offset();"relative"==s.css("position")?"body"==s.get(0).nodeName.toLowerCase()||(t.top+=parseFloat(s.css("border-top-width")),t.left+=parseFloat(s.css("border-left-width"))):(t.top-=parseFloat(s.css("border-top-width")),t.left-=parseFloat(s.css("border-left-width")),t.top-=parseFloat(s.css("margin-top")),t.left-=parseFloat(s.css("margin-left"))),isNaN(t.left)&&(t.left=0),isNaN(t.top)&&(t.top=0),t.left-=e.dx,t.top-=e.dy,j.css("height",a(this).height()),p.each(function(b){o[b]=a(this).offset()}),a(this).stop();var u=0,v=0;p.each(function(b){a(this).stop();var c=a(this).get(0);"absolute"==c.style.position?(u=-e.dx,v=-e.dy):(u=e.dx,v=e.dy),c.style.position="absolute",c.style.margin="0",c.style.top=o[b].top-parseFloat(c.style.marginTop)-t.top+v+"px",c.style.left=o[b].left-parseFloat(c.style.marginLeft)-t.left+u+"px"});var w=a(j).clone(),x=w.get(0);for(x.innerHTML="",x.setAttribute("id",""),x.style.height="auto",x.style.width=j.width()+"px",w.append(i),w.insertBefore(j),w.css("opacity",0),x.style.zIndex=-1,x.style.margin="0",x.style.position="absolute",x.style.top=n.top-t.top+"px",x.style.left=n.left-t.left+"px","dynamic"===e.adjustHeight?j.animate({height:w.height()},e.duration,e.easing):"auto"===e.adjustHeight&&(l=w.height(),parseFloat(k)<parseFloat(l)?j.css("height",l):m=!0),p.each(function(){var c=[];"function"==typeof e.attribute?(g=e.attribute(a(this)),i.each(function(){return e.attribute(this)==g?(c=a(this),!1):void 0})):c=i.filter("["+e.attribute+"="+a(this).attr(e.attribute)+"]"),h.push(c.length?e.useScaling?{element:a(this),animation:{top:c.offset().top-t.top,left:c.offset().left-t.left,opacity:1,scale:"1.0"}}:{element:a(this),animation:{top:c.offset().top-t.top,left:c.offset().left-t.left,opacity:1}}:e.useScaling?{element:a(this),animation:{opacity:"0.0",scale:"0.0"}}:{element:a(this),animation:{opacity:"0.0"}})}),i.each(function(){var c=[],f=[];"function"==typeof e.attribute?(g=e.attribute(a(this)),p.each(function(){return e.attribute(this)==g?(c=a(this),!1):void 0}),i.each(function(){return e.attribute(this)==g?(f=a(this),!1):void 0})):(c=p.filter("["+e.attribute+"="+a(this).attr(e.attribute)+"]"),f=i.filter("["+e.attribute+"="+a(this).attr(e.attribute)+"]"));var k;if(0===c.length){k=e.useScaling?{opacity:"1.0",scale:"1.0"}:{opacity:"1.0"},d=f.clone();var l=d.get(0);l.style.position="absolute",l.style.margin="0",l.style.top=f.offset().top-t.top+"px",l.style.left=f.offset().left-t.left+"px",d.css("opacity",0),e.useScaling&&d.css("transform","scale(0.0)"),d.appendTo(j),h.push({element:a(d),animation:k})}}),w.remove(),e.enhancement(j),c=0;c<h.length;c++)h[c].element.animate(h[c].animation,e.duration,e.easing,r)})}}(jQuery);
